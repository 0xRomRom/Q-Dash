const e=document.querySelector(".watchlist"),t=document.querySelector(".watch-close"),a=document.querySelector(".watchlist-div"),s=document.querySelector(".dropshadow"),c=(document.querySelector(".view-watchlist"),document.querySelector(".watchlist-box"),document.querySelector(".add-to-watchlist")),o=document.querySelector(".modal-dropshadow"),n=document.querySelector(".inner-search-close"),d=document.querySelector(".add-item-div"),i=document.querySelector(".add-search-button"),l=document.querySelector(".coin-search-input"),r=document.querySelector(".no-search-res"),h=document.querySelector(".no-search-res2"),u=document.querySelector(".coin-result-logo"),m=document.querySelector(".search-res-title"),p=document.querySelector(".item-result-lower"),g=document.querySelector(".lds-ripple"),w=document.querySelector(".watch-low");document.querySelectorAll(".delete-from-watch");let y;window.addEventListener("load",(async()=>{setTimeout((async()=>{const e=localStorage.getItem("loggedIn"),t=await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${e}/apiLink.json`),a=await t.json();console.log(a),a.length<5?localStorage.setItem("userLink",""):localStorage.setItem("userLink",a),await I()}),1e3)})),e.addEventListener("click",(()=>{const e=localStorage.getItem("loggedIn");console.log(e),e?(I(),a.classList.remove("hidden"),s.classList.remove("hidden")):window.location.href="https://qdash.net/login.html"})),s.addEventListener("click",(()=>{a.classList.add("hidden"),s.classList.add("hidden")})),t.addEventListener("click",(()=>{a.classList.add("hidden"),s.classList.add("hidden")})),c.addEventListener("click",(()=>{d.classList.remove("hidden"),p.classList.add("hidden"),o.classList.remove("hidden"),l.focus()})),o.addEventListener("click",(()=>{d.classList.add("hidden"),o.classList.add("hidden")})),n.addEventListener("click",(()=>{d.classList.add("hidden"),o.classList.add("hidden")}));const L=async()=>{if(h.classList.add("hidden"),""===l.value)return void h.classList.remove("hidden");g.classList.remove("hidden"),p.classList.add("hidden");let e=l.value.toLowerCase();y=e,r.classList.add("hidden");const t=await fetch(`https://api.coingecko.com/api/v3/search?query=${e}`),a=await t.json();0!==a.coins.length?v(a):r.classList.remove("hidden")},v=e=>{for(let t of Object.values(e.coins))if(t.symbol.toLowerCase()===y||t.name.toLowerCase()===y)return void f(t.id)},f=async e=>{try{const t=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${e}&order=market_cap_desc&per_page=100&page=1&sparkline=false`),a=await t.json();b(a[0])}catch(e){console.log(e)}},b=e=>{u.src=e.image,m.textContent=e.name,g.classList.add("hidden"),p.classList.remove("hidden"),l.value="",S=e.id+"%2C"};i.addEventListener("click",L),l.addEventListener("keyup",(e=>{"Enter"===e.key&&L()}));let S="";let k="";const j=()=>{k="",k="https://api.coingecko.com/api/v3/simple/price?ids="+S+"&vs_currencies=usd&include_24hr_change=true",console.log(k),q()},q=async()=>{const e=await fetch(k),t=await e.json();console.log(t),localStorage.removeItem("userLink"),localStorage.setItem("userLink",k),_(),I()},I=async()=>{try{const e=localStorage.getItem("userLink"),t=await fetch(e),a=await t.json();w.innerHTML="";for(let e=0;e<Object.values(a).length;e++)w.innerHTML+=`<div class="watch-item">\n    <h1 class="watch-title">${(Object.keys(a)[e].charAt(0).toUpperCase()+Object.keys(a)[e].slice(1)).replace("-"," ")}</h1>\n    <h2 class="watch-price">$${Object.values(a)[e].usd}</h2>\n    <h2 class="watch-24h-change">24h: <span class="percentage-daily ${Object.values(a)[e].usd_24h_change>=0?"":"daily-down"}">${Object.values(a)[e].usd_24h_change>=0?"+":""}${Object.values(a)[e].usd_24h_change.toFixed(2)}%</span></h2>\n    <button class="delete-from-watch"><i class="fa-solid fa-circle-minus" data-id="${Object.keys(a)[e]}"></i></button>\n  </div>`}catch(e){console.log(e),w.innerHTML='<h1 class="no-item-text">Add new items to watchlist</h1>'}};p.addEventListener("click",(()=>{(async()=>{const e=localStorage.getItem("userLink");let t="";const a=localStorage.getItem("loggedIn"),s=await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${a}/watchlist.json`),c=await s.json();if(null===c&&(t=S),null!==c){if(e.includes(S))return void alert("Already on watchlist!");t=Object.values(c).join("")+S}S="",S=t.replace(",",""),await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${a}/watchlist.json`,{method:"PUT",body:JSON.stringify(S),headers:{"Content-Type":"application/json"}}),j()})(),p.disabled=!0,setTimeout((()=>{p.disabled=!1}),1e3)}));w.addEventListener("click",(e=>{(async e=>{if(!e.target.hasAttribute("data-id"))return;const t=localStorage.getItem("loggedIn"),a=await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${t}/watchlist.json`),s=await a.json();let c=Object.values(s).toString().replace(/,/g,"").replace(e.target.dataset.id+"%2C","");await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${t}/watchlist.json`,{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}),localStorage.removeItem("userLink"),localStorage.setItem("userLink","https://api.coingecko.com/api/v3/simple/price?ids="+c+"&vs_currencies=usd&include_24hr_change=true"),93===localStorage.getItem("userLink").length&&localStorage.setItem("userLink",""),_(),await I()})(e)}));const _=async()=>{const e=localStorage.getItem("loggedIn"),t=localStorage.getItem("userLink"),a=93===t.length?"":t;await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${e}/apiLink.json`,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})};
//# sourceMappingURL=index.22a39c1b.js.map
