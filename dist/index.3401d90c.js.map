{"mappings":"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","sources":["scripts/manageNotifications.js"],"sourcesContent":["\"use strict\";\r\n\r\nconst manageNotification = document.querySelector(\".man-notif\");\r\nconst notificationModal = document.querySelector(\".notification-box\");\r\nconst dropShadow = document.querySelector(\".dropshadow\");\r\nconst closeNotifModal = document.querySelector(\".light-close3\");\r\nconst notifPush = document.querySelector(\".notif-push\");\r\nconst coinSearch = document.querySelector(\".coin-search\");\r\nconst coinFetchPrice = document.querySelector(\".coin-fetch-output\");\r\nconst coinFetchTitle = document.querySelector(\".coin-fetch-title\");\r\nconst coinFetchTitle2 = document.querySelector(\".target-price-title\");\r\nconst userInput = document.querySelector(\".user-coin-query\");\r\nconst allowContainer = document.querySelector(\".notif-anim-container\");\r\nconst inputContainer = document.querySelector(\".notif-anim-container2\");\r\nconst resultContainer = document.querySelector(\".notif-anim-container3\");\r\nconst noCoinErrorTxt = document.querySelector(\".error-text2\");\r\nconst coinNameTitle = document.querySelector(\".state-coinname\");\r\nconst targetPriceTxt = document.querySelector(\".target-price-title\");\r\nconst targetPriceExpected = document.querySelector(\".target-price-expected\");\r\nconst calculatePrice = document.querySelector(\".calculate-price\");\r\nconst userPercentageInput = document.querySelector(\".user-percentage-input\");\r\nconst incDecToggle = document.querySelector(\".coin-param\");\r\nconst alertButton = document.querySelector(\".alert-button\");\r\n\r\nconst upperModal = document.querySelector(\".result-upper\");\r\nconst lowerModal = document.querySelector(\".result-lower\");\r\nconst sideModal = document.querySelector(\".result-setup-box\");\r\n\r\n// window.addEventListener(\"load\", () => {\r\n//   if (Notification.permission === \"granted\") {\r\n//     allowContainer.classList.add(\"hidden\");\r\n//     inputContainer.classList.remove(\"hidden\");\r\n//   }\r\n// });\r\n\r\n// Open notification modal\r\nmanageNotification.addEventListener(\"click\", () => {\r\n  notificationModal.classList.remove(\"hidden\");\r\n  dropShadow.classList.remove(\"hidden\");\r\n});\r\n\r\n// Close notification modal\r\ncloseNotifModal.addEventListener(\"click\", () => {\r\n  notificationModal.classList.add(\"hidden\");\r\n  dropShadow.classList.add(\"hidden\");\r\n});\r\n\r\ndropShadow.addEventListener(\"click\", () => {\r\n  notificationModal.classList.add(\"hidden\");\r\n  dropShadow.classList.add(\"hidden\");\r\n});\r\n\r\n// Ask for permission\r\nnotifPush.addEventListener(\"click\", async () => {\r\n  await Notification.requestPermission().then((perm) => {\r\n    if (perm === \"granted\") {\r\n      allowContainer.classList.add(\"opacityOut\");\r\n      setTimeout(() => {\r\n        allowContainer.classList.add(\"hidden\");\r\n        inputContainer.classList.remove(\"hidden\");\r\n      }, 2000);\r\n    }\r\n  });\r\n});\r\n\r\n// User input search\r\ncoinSearch.addEventListener(\"click\", () => {\r\n  fetchCoinAlert();\r\n});\r\n\r\nlet fetchedCoinPrice = 0;\r\nlet expectedCoinPrice = 0;\r\nlet userQueriedCoinName = \"\";\r\nlet userSpecifiedChange = \"\";\r\n\r\n// Fetch data\r\nconst fetchCoinAlert = async () => {\r\n  try {\r\n    noCoinErrorTxt.classList.add(\"inv\");\r\n    const response = await fetch(\r\n      `https://api.coingecko.com/api/v3/simple/price?ids=${userInput.value}&vs_currencies=usd`\r\n    );\r\n    const data = await response.json();\r\n    userQueriedCoinName = userInput.value;\r\n    fetchedCoinPrice = data[userInput.value].usd;\r\n    coinFetchPrice.textContent = `$${data[userInput.value].usd}`;\r\n    coinFetchTitle.textContent =\r\n      userInput.value.charAt(0).toUpperCase() + userInput.value.slice(1);\r\n    coinFetchTitle2.textContent =\r\n      userInput.value.charAt(0).toUpperCase() + userInput.value.slice(1);\r\n    inputContainer.classList.add(\"opacityOut\");\r\n    coinNameTitle.textContent = `If ${\r\n      userInput.value.charAt(0).toUpperCase() + userInput.value.slice(1)\r\n    }'s price`;\r\n    console.log(fetchedCoinPrice);\r\n    setTimeout(() => {\r\n      inputContainer.classList.add(\"hidden\");\r\n      resultContainer.classList.remove(\"hidden\");\r\n    }, 2000);\r\n  } catch (err) {\r\n    noCoinErrorTxt.classList.remove(\"inv\");\r\n  }\r\n};\r\n\r\nlet positiveBool = \"\";\r\n\r\n// Calculate price\r\ncalculatePrice.addEventListener(\"click\", () => {\r\n  if (incDecToggle.value === \"Increases\") {\r\n    let calculateValue = (+userPercentageInput.value + 100) / 100;\r\n    let outputValue = calculateValue * fetchedCoinPrice;\r\n    expectedCoinPrice = outputValue;\r\n    userSpecifiedChange = \"surged past your target!\";\r\n    targetPriceExpected.textContent = `$${+outputValue.toFixed(2)}`;\r\n    alertButton.classList.remove(\"hidden\");\r\n    positiveBool = true;\r\n    return;\r\n  }\r\n  if (incDecToggle.value === \"Decreases\") {\r\n    let calculateValue = (100 - +userPercentageInput.value) / 100;\r\n    let outputValue = calculateValue * fetchedCoinPrice;\r\n    expectedCoinPrice = outputValue;\r\n    userSpecifiedChange = \"dropped past your target!\";\r\n    targetPriceExpected.textContent = `$${+outputValue.toFixed(2)}`;\r\n    alertButton.classList.remove(\"hidden\");\r\n    positiveBool = false;\r\n    return;\r\n  }\r\n});\r\n\r\nlet fetchedPrice = 0;\r\n\r\nconst intervalFetcher = () => {\r\n  setInterval(async () => {\r\n    try {\r\n      if (positiveBool) {\r\n        if (fetchedPrice < expectedCoinPrice) {\r\n          const response = await fetch(\r\n            `https://api.coingecko.com/api/v3/simple/price?ids=${userQueriedCoinName}&vs_currencies=usd`\r\n          );\r\n          const data = await response.json();\r\n          fetchedPrice = data[userQueriedCoinName].usd;\r\n          console.log(fetchedPrice);\r\n          console.log(\"Fetched Plus\");\r\n          checkResultsMin();\r\n        }\r\n      }\r\n\r\n      if (!positiveBool && positiveBool !== \"\") {\r\n        const response = await fetch(\r\n          `https://api.coingecko.com/api/v3/simple/price?ids=${userQueriedCoinName}&vs_currencies=usd`\r\n        );\r\n        const data = await response.json();\r\n        fetchedPrice = data[userQueriedCoinName].usd;\r\n        console.log(fetchedPrice);\r\n        console.log(\"Fetched Min\");\r\n        checkResultsPlus();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }, 10000);\r\n};\r\n// If expected price is lower\r\nconst checkResultsMin = () => {\r\n  if (fetchedPrice !== 0 && fetchedPrice > expectedCoinPrice) {\r\n    alert(\"Alert!\");\r\n    const notification = new Notification(\r\n      `${\r\n        userQueriedCoinName.charAt(0).toUpperCase() + userInput.value.slice(1)\r\n      }'s price ${userSpecifiedChange}`,\r\n      {\r\n        body: `${\r\n          userQueriedCoinName.charAt(0).toUpperCase() + userInput.value.slice(1)\r\n        }'s price is $${expectedCoinPrice}`,\r\n      }\r\n    );\r\n  }\r\n};\r\n\r\n// If expected price is higher\r\nconst checkResultsPlus = () => {\r\n  if (fetchedPrice !== 0 && fetchedPrice < expectedCoinPrice) {\r\n    alert(\"Alert!\");\r\n    const notification = new Notification(\r\n      `${\r\n        userQueriedCoinName.charAt(0).toUpperCase() + userInput.value.slice(1)\r\n      }'s price ${userSpecifiedChange}`,\r\n      {\r\n        body: `${\r\n          userQueriedCoinName.charAt(0).toUpperCase() + userInput.value.slice(1)\r\n        }'s price is $${expectedCoinPrice}`,\r\n      }\r\n    );\r\n  }\r\n};\r\n\r\nconst fadeModalsOut = (modal, time) => {\r\n  setTimeout(() => {\r\n    modal.classList.add(\"fadeModalOut\");\r\n  }, time);\r\n};\r\n\r\n// Launch alert\r\nalertButton.addEventListener(\"click\", () => {\r\n  intervalFetcher();\r\n  fadeModalsOut(upperModal, 300);\r\n  fadeModalsOut(sideModal, 600);\r\n  fadeModalsOut(lowerModal, 900);\r\n  fadeModalsOut(notificationModal, 1400);\r\n  setTimeout(() => {\r\n    notificationModal.classList.add(\"hidden\");\r\n    notificationModal.classList.remove(\"fadeModalOut\");\r\n    upperModal.classList.remove(\"fadeModalOut\");\r\n    sideModal.classList.remove(\"fadeModalOut\");\r\n    lowerModal.classList.remove(\"fadeModalOut\");\r\n    dropShadow.classList.add(\"hidden\");\r\n    inputContainer.classList.add(\"hidden\");\r\n    resultContainer.classList.add(\"hidden\");\r\n    inputContainer.classList.remove(\"hidden\");\r\n    if (Notification.permission !== \"granted\") {\r\n      allowContainer.classList.remove(\"hidden\");\r\n    }\r\n    allowContainer.classList.remove(\"opacityOut\");\r\n    inputContainer.classList.remove(\"opacityOut\");\r\n    userInput.value = \"\";\r\n    coinFetchPrice.textContent = \"\";\r\n    coinFetchTitle.textContent = \"\";\r\n    coinFetchTitle2.textContent = \"\";\r\n    coinNameTitle.textContent = \"\";\r\n    targetPriceExpected.textContent = \"\";\r\n    userPercentageInput.value = \"\";\r\n    incDecToggle.value = \"Increases\";\r\n  }, 1400);\r\n});\r\n"],"names":["$4c1667d0c42917ff$var$manageNotification","document","querySelector","$4c1667d0c42917ff$var$notificationModal","$4c1667d0c42917ff$var$dropShadow","$4c1667d0c42917ff$var$closeNotifModal","$4c1667d0c42917ff$var$notifPush","$4c1667d0c42917ff$var$coinSearch","$4c1667d0c42917ff$var$coinFetchPrice","$4c1667d0c42917ff$var$coinFetchTitle","$4c1667d0c42917ff$var$coinFetchTitle2","$4c1667d0c42917ff$var$userInput","$4c1667d0c42917ff$var$allowContainer","$4c1667d0c42917ff$var$inputContainer","$4c1667d0c42917ff$var$resultContainer","$4c1667d0c42917ff$var$noCoinErrorTxt","$4c1667d0c42917ff$var$coinNameTitle","$4c1667d0c42917ff$var$targetPriceExpected","$4c1667d0c42917ff$var$calculatePrice","$4c1667d0c42917ff$var$userPercentageInput","$4c1667d0c42917ff$var$incDecToggle","$4c1667d0c42917ff$var$alertButton","$4c1667d0c42917ff$var$upperModal","$4c1667d0c42917ff$var$lowerModal","$4c1667d0c42917ff$var$sideModal","addEventListener","classList","remove","add","async","Notification","requestPermission","then","perm","setTimeout","$4c1667d0c42917ff$var$fetchCoinAlert","$4c1667d0c42917ff$var$fetchedCoinPrice","$4c1667d0c42917ff$var$expectedCoinPrice","$4c1667d0c42917ff$var$userQueriedCoinName","$4c1667d0c42917ff$var$userSpecifiedChange","response","fetch","value","data","json","usd","textContent","charAt","toUpperCase","slice","console","log","err","$4c1667d0c42917ff$var$positiveBool","outputValue","toFixed","outputValue1","$4c1667d0c42917ff$var$fetchedPrice","$4c1667d0c42917ff$var$checkResultsMin","alert","body","$4c1667d0c42917ff$var$checkResultsPlus","$4c1667d0c42917ff$var$fadeModalsOut","modal","time","setInterval","response1","data1","permission"],"version":3,"file":"index.3401d90c.js.map"}