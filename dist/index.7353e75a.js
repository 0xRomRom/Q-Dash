const e=document.querySelector(".watchlist"),t=document.querySelector(".watch-close"),s=document.querySelector(".watchlist-div"),a=document.querySelector(".dropshadow"),c=document.querySelector(".view-watchlist"),o=document.querySelector(".watchlist-box"),d=document.querySelector(".view-assets"),i=document.querySelector(".assets-box"),n=document.querySelector(".add-to-watchlist"),l=document.querySelector(".modal-dropshadow"),r=document.querySelector(".inner-search-close"),h=document.querySelector(".add-item-div"),u=document.querySelector(".add-search-button"),m=document.querySelector(".coin-search-input"),p=document.querySelector(".no-search-res"),g=document.querySelector(".no-search-res2"),L=document.querySelector(".coin-result-logo"),w=document.querySelector(".search-res-title"),f=document.querySelector(".item-result-lower"),v=document.querySelector(".lds-ripple"),y=document.querySelector(".watch-low");document.querySelectorAll(".delete-from-watch");let S;window.addEventListener("load",(async()=>{setTimeout((async()=>{const e=localStorage.getItem("loggedIn"),t=(localStorage.getItem("userLink"),await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${e}/apiLink.json`)),s=await t.json();console.log(s),s.length<5?localStorage.setItem("userLink",""):localStorage.setItem("userLink",s),await $()}),1e3)})),c.addEventListener("click",(()=>{c.classList.remove("fadeColorOut"),c.classList.add("fadeColorIn"),d.classList.add("fadeColorOut"),o.classList.remove("hidden"),o.classList.add("fadeBoxIn"),i.classList.add("hidden"),setTimeout((()=>{o.classList.remove("fadeBoxIn")}),500)})),d.addEventListener("click",(()=>{d.classList.remove("fadeColorOut"),d.classList.add("fadeColorIn"),c.classList.add("fadeColorOut"),i.classList.remove("hidden"),i.classList.add("fadeBoxIn"),o.classList.add("hidden")})),e.addEventListener("click",(()=>{localStorage.getItem("loggedIn")?($(),s.classList.remove("hidden"),a.classList.remove("hidden")):window.location.href="https://www.qdash.net/login.html"})),a.addEventListener("click",(()=>{s.classList.add("hidden"),a.classList.add("hidden")})),t.addEventListener("click",(()=>{s.classList.add("hidden"),a.classList.add("hidden")})),n.addEventListener("click",(()=>{h.classList.remove("hidden"),l.classList.remove("hidden"),m.focus()})),l.addEventListener("click",(()=>{h.classList.add("hidden"),l.classList.add("hidden")})),r.addEventListener("click",(()=>{h.classList.add("hidden"),l.classList.add("hidden")}));const b=async()=>{if(g.classList.add("hidden"),""===m.value)return void g.classList.remove("hidden");v.classList.remove("hidden"),f.classList.add("hidden");let e=m.value.toLowerCase();S=e,p.classList.add("hidden");const t=await fetch(`https://api.coingecko.com/api/v3/search?query=${e}`),s=await t.json();0!==s.coins.length?k(s):p.classList.remove("hidden")},k=e=>{for(let t of Object.values(e.coins))if(t.symbol.toLowerCase()===S||t.name.toLowerCase()===S)return void q(t.id)},q=async e=>{try{const t=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${e}&order=market_cap_desc&per_page=100&page=1&sparkline=false`),s=await t.json();j(s[0])}catch(e){console.log(e)}},j=e=>{L.src=e.image,w.textContent=e.name,v.classList.add("hidden"),f.classList.remove("hidden"),m.value="",I=e.id+"%2C"};u.addEventListener("click",b),m.addEventListener("keyup",(e=>{"Enter"===e.key&&b()}));let I="";let O="";const C=()=>{O="",O="https://api.coingecko.com/api/v3/simple/price?ids="+I+"&vs_currencies=usd&include_24hr_change=true",console.log(O),E()},E=async()=>{const e=await fetch(O),t=await e.json();console.log(t),localStorage.removeItem("userLink"),localStorage.setItem("userLink",O),_(),$()},$=async()=>{try{const e=localStorage.getItem("userLink"),t=await fetch(e),s=await t.json();y.innerHTML="";for(let e=0;e<Object.values(s).length;e++)y.innerHTML+=`<div class="watch-item">\n    <h1 class="watch-title">${(Object.keys(s)[e].charAt(0).toUpperCase()+Object.keys(s)[e].slice(1)).replace("-"," ")}</h1>\n    <h2 class="watch-price">$${Object.values(s)[e].usd}</h2>\n    <h2 class="watch-24h-change">24h: ${Object.values(s)[e].usd_24h_change>=0?"+":""}${Object.values(s)[e].usd_24h_change.toFixed(2)}%</h2>\n    <button class="delete-from-watch"><i class="fa-solid fa-circle-minus" data-id="${Object.keys(s)[e]}"></i></button>\n  </div>`}catch(e){console.log(e),y.innerHTML='<h1 class="no-item-text">Add new items to watchlist</h1>'}};f.addEventListener("click",(async()=>{const e=localStorage.getItem("userLink");let t="";const s=localStorage.getItem("loggedIn"),a=await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${s}/watchlist.json`),c=await a.json();if(null===c&&(t=I),null!==c){if(e.includes(I))return void alert("Already on watchlist!");t=Object.values(c).join("")+I}I="",I=t.replace(",","");await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${s}/watchlist.json`,{method:"PUT",body:JSON.stringify(I),headers:{"Content-Type":"application/json"}});C()}));y.addEventListener("click",(e=>{(async e=>{if(!e.target.hasAttribute("data-id"))return;const t=localStorage.getItem("loggedIn"),s=await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${t}/watchlist.json`),a=await s.json();let c=Object.values(a).toString().replace(/,/g,"").replace(e.target.dataset.id+"%2C","");await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${t}/watchlist.json`,{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}),localStorage.removeItem("userLink"),localStorage.setItem("userLink","https://api.coingecko.com/api/v3/simple/price?ids="+c+"&vs_currencies=usd&include_24hr_change=true"),93===localStorage.getItem("userLink").length&&localStorage.setItem("userLink",""),_(),await $()})(e)}));const _=async()=>{const e=localStorage.getItem("loggedIn"),t=localStorage.getItem("userLink"),s=93===t.length?"":t;await fetch(`https://qdash-3fe95-default-rtdb.europe-west1.firebasedatabase.app/${e}/apiLink.json`,{method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})};
//# sourceMappingURL=index.7353e75a.js.map
